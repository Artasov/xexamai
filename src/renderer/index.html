<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>xexamai</title>
    <link rel="stylesheet" href="../../dist/styles.css"/>
    <link rel="stylesheet" href="./wide-classes.min.css"/>
</head>
<body class="bg-gray-900 text-gray-100">
<div class="h-screen flex flex-col min-w-[330px] relative app-grid">
    <div class="rainbow" style="position: absolute; top: 20%; right: 20%; width: 500px; height: 500px"></div>
    <div class="fccc" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 2">
        <img id="main-logo" alt="xexamai"
             style="width: 70vmin"/>
    </div>
    <!-- Custom title bar -->
    <header class="frbc px-3 py-2 drag-region app-header">
        <style>
            .rainbow {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                background: conic-gradient(
                        red, orange, yellow, green, cyan, blue, violet, red
                );
                filter: blur(calc((20vh + 50vw) / 1.9));
                animation: spin 10s linear infinite;
            }

            @keyframes spin {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
        </style>
        <div class="flex items-center gap-3">
            <div class="relative" style="width: 32px; height: 32px">
                <img id="header-logo" alt="xexamai"
                     style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 2"/>
                <div class="rainbow"
                     style="position: absolute; top: 0; left: 0; filter: blur(25px) saturate(1.5);"></div>
            </div>
            <h1 class="text-lg font-semibold text-gray-100">xexamai</h1>
            <div id="status" class="status-badge ready">Ready</div>
        </div>
        <div class="window-controls no-drag -mr-1">
            <!--            <button id="minimizeBtn" class="window-control-btn minimize" title="Minimize">-->
            <!--                <svg width="12" height="12" viewBox="0 0 12 12">-->
            <!--                    <rect x="2" y="5" width="8" height="1" fill="currentColor"/>-->
            <!--                </svg>-->
            <!--            </button>-->
            <button id="closeBtn" class="close mr-2" title="Close">
                <svg width="12" height="12" viewBox="0 0 12 12">
                    <path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- Main content -->
    <main class="fc overflow-auto px-4 pb-4 pt-1">
        <!-- Navigation tabs -->
        <div class="tabs-container">
            <div class="tabs">
                <button id="mainTab" class="tab active">Main</button>
                <button id="settingsTab" class="tab">Settings</button>
            </div>
        </div>

        <!-- Main content area -->
        <div id="mainContent" class="content-area fc overflow-auto">
            <section class="overflow-auto grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="control-panel h-min min-w-[280px] card md:col-span-1">
                    <div id="send-last-container" class="send-last-container">
                        <div class="label mb-2">Send the last:</div>
                        <div id="durations" class="flex gap-2 flex-wrap"></div>
                    </div>
                    <div class="flex items-center gap-4">
                        <button id="btnRecord" class="btn" data-state="idle">Start Audio Loop</button>
                        <button id="btnToggleInput" class="btn btn-secondary !px-1 !py-0 text-xs"
                                title="Toggle audio input">MIC
                        </button>
                        <div id="waveform-container" class="flex-1"></div>
                    </div>
                    <div class="mt-2">
                        <div class="label mb-2">Direct text input:</div>
                        <div class="flex gap-2">
                            <input
                                    id="textInput"
                                    placeholder="Type your question here..."
                                    class="input-field flex-1 p-2 bg-gray-700 border border-gray-600 rounded text-gray-100 placeholder-gray-400 resize-none"

                            />
                            <button
                                    id="btnSendText"
                                    class="btn btn-primary self-start"
                                    disabled
                            >
                                Send
                            </button>
                        </div>
                    </div>

                    <!-- Stream Results Section (only visible in stream mode) -->
                    <div id="streamResultsSection" class="mt-2 hidden">
                        <div class="label mb-2">Stream Results:</div>
                        <div class="flex gap-2">
                            <textarea
                                    id="streamResultsTextarea"
                                    placeholder="Stream transcription will appear here..."
                                    class="input-field flex-1 p-2 bg-gray-700 border border-gray-600 rounded text-gray-100 placeholder-gray-400 resize-none"
                                    rows="4"
                            ></textarea>
                            <button
                                    id="btnSendStreamText"
                                    class="btn btn-primary self-start"
                                    disabled
                            >
                                Send
                            </button>
                        </div>
                    </div>
                </div>

                <div class="result-panel fc overflow-y-auto card md:col-span-2">
                    <div class="label mb-1">Recognized</div>
                    <div id="textOut"></div>
                    <div class="fr gap-2 mt-4 mb-1">
                        <div class="label">Reply</div>
                        <button id="btnStopStream" class="btn btn-secondary !px-1 !py-0 text-xs hidden">Stop</button>
                    </div>
                    <div id="answerOut" class="overflow-auto min-h-[1rem]"></div>
                </div>
            </section>
        </div>

        <!-- Settings content area -->
        <div id="settingsContent" class="content-area hidden fc overflow-auto">
            <!-- Settings sub-navigation -->
            <div class="settings-tabs-container mb-4">
                <div class="settings-tabs">
                    <button id="settingsGeneralTab" class="settings-tab active">General</button>
                    <button id="settingsAiTab" class="settings-tab">AI Models</button>
                    <button id="settingsAudioTab" class="settings-tab">Audio</button>
                    <button id="settingsHotkeysTab" class="settings-tab">Hotkeys</button>
                </div>
            </div>

            <!-- Settings content panels -->
            <div id="settingsGeneralPanel" class="settings-panel-content w-full overflow-auto pr-1"></div>
            <div id="settingsAiPanel" class="settings-panel-content w-full overflow-auto pr-1 hidden"></div>
            <div id="settingsAudioPanel" class="settings-panel-content w-full overflow-auto pr-1 hidden"></div>
            <div id="settingsHotkeysPanel" class="settings-panel-content w-full overflow-auto pr-1 hidden"></div>
        </div>
    </main>
</div>

<script type="module" src="./renderer.js"></script>
</body>
</html>

